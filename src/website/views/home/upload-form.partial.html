<form
  class="m-2 mb-4"
  action="/api/file/upload"
  method="POST"
  enctype="multipart/form-data"
>
  <div class="col" x-data="{ names: [] }">
    <div class="container">
      <div class="row">
        <input
          @change="names = getFilenamesFromEvent(event)"
          class="d-none"
          type="file"
          id="file"
          name="file"
        />
        <div class="col-auto">
          <button
            class="btn btn-outline-secondary me-2"
            @click="document.getElementById('file').click()"
            type="button"
            id="browseButton"
          >
            Browse Files
          </button>
        </div>
        <div class="col-auto">
          <button
            class="btn btn-outline-primary"
            x-bind:disabled="names.length === 0"
            type="submit"
          >
            Upload Files
          </button>
        </div>
        <div class="col d-flex align-items-center">
          <template x-for="name in names">
            <div x-text="name"></div>
          </template>
        </div>
      </div>
    </div>
  </div>
  <input type="hidden" id="directory" name="directory" x-bind:value="root" />
  <script>
    function getFilenamesFromEvent(evt) {
      const result = [];
      for (const file of evt.target.files) {
        result.push(file.name);
      }
      return result;
    }
  </script>
</form>
